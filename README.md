# MLPA Gradi Frontend & Backend κ°€μ΄λ“

## π“ ν”„λ΅μ νΈ κ°μ”
μ΄ ν”„λ΅μ νΈλ” AIλ¥Ό μ‚¬μ©ν•μ—¬ μ—…λ΅λ“λ λ‹µμ•μ§€ μ΄λ―Έμ§€μ—μ„ ν•™μƒ ν•™λ²μ„ μλ™μΌλ΅ μΈμ‹ν•κ³  μ±„μ ν•λ” μ‹μ¤ν…μ…λ‹λ‹¤. **Next.js Frontend**μ™€ **Spring Boot Backend**λ΅ κµ¬μ„±λμ–΄ μμΌλ©°, **AWS S3, SQS, Python AI μ„λΉ„μ¤**μ™€ μ—°λ™λ©λ‹λ‹¤.

## π› οΈ μ•„ν‚¤ν…μ² λ° λ°μ΄ν„° νλ¦„

### 1. ν•™μƒ ν•™λ² μΈμ‹ ν”„λ΅μ„Έμ¤
1.  **μ—…λ΅λ“**: μ‚¬μ©μκ°€ Frontendμ—μ„ λ‹µμ•μ§€(μ΄λ―Έμ§€)λ¥Ό μ—…λ΅λ“ν•©λ‹λ‹¤.
2.  **Presigned URL**: Frontendκ°€ Backend(`S3PresignService`)μ— Presigned URLμ„ μ”μ²­ν•©λ‹λ‹¤.
3.  **S3 μ—…λ΅λ“**: Frontendκ°€ μ΄λ―Έμ§€λ¥Ό AWS S3μ— μ§μ ‘ μ—…λ΅λ“ν•©λ‹λ‹¤.
4.  **μ΄λ²¤νΈ νΈλ¦¬κ±°**: S3 μ—…λ΅λ“κ°€ AWS Lambda ν•¨μ(`lambda_s3_trigger.py`)λ¥Ό νΈλ¦¬κ±°ν•©λ‹λ‹¤.
5.  **SQS λ©”μ‹μ§€ μ „μ†΅**: Lambdaκ°€ AWS SQSμ— `event_type: "STUDENT_ID_RECOGNITION"` λ©”μ‹μ§€λ¥Ό μ „μ†΅ν•©λ‹λ‹¤.
6.  **Backend μ²λ¦¬**:
    *   `SqsListenerService`κ°€ SQS νλ¥Ό ν΄λ§(Polling)ν•©λ‹λ‹¤.
    *   λ©”μ‹μ§€λ¥Ό νμ‹±ν•κ³ , λ§μ•½ AI μ„λΉ„μ¤μ—μ„ `status` ν•„λ“λ¥Ό λ„λ½ν–λ‹¤λ©΄ μλ™μΌλ΅ μ£Όμ…(`processing` λλ” `completed`)ν•©λ‹λ‹¤.
    *   **SSE (Server-Sent Events)**λ¥Ό ν†µν•΄ Frontendλ΅ μ§„ν–‰ μƒν™©μ„ μ‹¤μ‹κ°„ μ „μ†΅ν•©λ‹λ‹¤.
7.  **Frontend μ—…λ°μ΄νΈ**: `StudentIdLoading.tsx`κ°€ SSE μ΄λ²¤νΈλ¥Ό μμ‹ ν•μ—¬ μ§„ν–‰λ¥ (μ: "ν•™μƒ 4/40λ… μΈμ‹ μ™„λ£")μ„ μ—…λ°μ΄νΈν•©λ‹λ‹¤.

---

##  wrenches: μ£Όμ” μμ • μ‚¬ν•­ (Key Fixes)

### β… Backend (Spring Boot)
*   **SSE λ° μν™ μ°Έμ΅° ν•΄κ²°**:
    *   `StorageController`μ™€ `SqsListenerService` κ°„μ μν™ μμ΅΄μ„±μ„ λκΈ° μ„ν•΄ SSE λ΅μ§μ„ λ³„λ„μ `SseService`λ΅ λ¶„λ¦¬ν–μµλ‹λ‹¤.
*   **SQS μ²λ¦¬ κ°μ„ **:
    *   `SqsListenerService`λ¥Ό λ¦¬ν©ν† λ§ν•μ—¬ `event_type`μ— λ”°λΌ μ„λ΅ λ‹¤λ¥Έ λ΅μ§μ„ μν–‰ν•λ„λ΅ `switch` λ¬Έμ„ λ„μ…ν–μµλ‹λ‹¤.
    *   **μ•μ „μ¥μΉ**: AI μ„λΉ„μ¤κ°€ `status` κ°’μ„ λ³΄λ‚΄μ§€ μ•λ”λΌλ„ Backendμ—μ„ μλ™μΌλ΅ μ£Όμ…ν•μ—¬ Frontendκ°€ λ©μ¶”μ§€ μ•λ„λ΅ μ΅°μΉν–μµλ‹λ‹¤.
*   **CORS μ„¤μ •**:
    *   Frontend(`http://localhost:3000`)μ— λ€ν•΄ `allowCredentials(true)`λ¥Ό ν¬ν•¨ν• CORS μ •μ±…μ„ μ μ©ν•μ—¬ SSE μ—°κ²° μ•μ •μ„ ν™•λ³΄ν–μµλ‹λ‹¤.

### β… Frontend (Next.js)
*   **μ‹ν— μƒμ„± λ‚΄λΉ„κ²μ΄μ… μμ •**:
    *   λ΅λ”© νμ΄μ§€λ΅ μ΄λ™ν•  λ• `total` κ°’μ΄ 0μ΄κ±°λ‚ λ¬Έν•­ μλ΅ μλ» μ „λ‹¬λλ λ²„κ·Έλ¥Ό μμ •ν–μµλ‹λ‹¤.
    *   μ΄μ  μ—…λ΅λ“λ **μ‹¤μ  νμΌ κ°μ(`answerSheetFiles.length`)**κ°€ μ •ν™•ν μ „λ‹¬λ©λ‹λ‹¤.
*   **μ§„ν–‰λ¥  ν‘μ‹ (Progress Bar)**:
    *   `StudentIdLoading` μ»΄ν¬λ„νΈκ°€ SSE μ΄λ²¤νΈλ¥Ό μμ‹ ν•  λ•λ§λ‹¤ μ „μ²΄ κ°μμ™€ ν„μ¬ μ§„ν–‰ κ°μλ¥Ό λ™μ μΌλ΅ μ—…λ°μ΄νΈν•λ„λ΅ μμ •ν–μµλ‹λ‹¤.
*   **ν”„λ΅μ‹ μ„¤μ •**:
    *   `next.config.ts`μ—μ„ `/api/*` μ”μ²­μ„ Backend ν¬νΈ(`8080`)λ΅ ν¬μ›λ”©ν•λ„λ΅ μ„¤μ •ν–μµλ‹λ‹¤.

---

## π€ μ‹¤ν–‰ λ°©λ²• (How to Run)

### 1. Backend (λ°±μ—”λ“)
```bash
cd BE
./gradlew bootRun
# μ„λ²„κ°€ http://localhost:8080 μ—μ„ μ‹¤ν–‰λ©λ‹λ‹¤.
```

### 2. Frontend (ν”„λ΅ νΈμ—”λ“)
```bash
cd FE/mlpa-gradi-frontend
npm run dev
# μ•±μ΄ http://localhost:3000 μ—μ„ μ‹¤ν–‰λ©λ‹λ‹¤.
```

### 3. AI μ‹λ®¬λ μ΄μ… (ν…μ¤νΈμ©)
μ‹¤μ  AWS μ—…λ΅λ“ μ—†μ΄ μ „μ²΄ νλ¦„μ„ ν…μ¤νΈν•λ ¤λ©΄ λ‹¤μ μ¤ν¬λ¦½νΈλ¥Ό μ‹¤ν–‰ν•μ„Έμ”:
```bash
python BE/ai/simulate_full_flow.py
# κ°€μ§ SQS λ©”μ‹μ§€λ¥Ό μ „μ†΅ν•μ—¬ Frontendκ°€ μ •μƒμ μΌλ΅ λ°μ‘ν•λ”μ§€ ν™•μΈν•©λ‹λ‹¤.
```
